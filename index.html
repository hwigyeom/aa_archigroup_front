<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <link rel="icon" type="image/svg+xml" href="public/images/favicon.svg"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AA Archigroup</title>
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
  <link rel="stylesheet" href="src/normalize.css"/>
  <link rel="stylesheet" href="src/global.css"/>
  <link rel="stylesheet" href="src/main.css"/>
  <script type="module" src="src/components/global-header.ts"></script>
  <script type="module" src="src/components/global-nav-bar.ts"></script>
  <script type="module" src="src/components/user-info.ts"></script>
  <script type="module" src="src/components/global-menu-tree.ts"></script>
  <script type="module" src="src/components/page-container.ts"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body class="menu-opened">
<global-header logo="public/images/main-ci.svg" logoAlt="AA Archigroup">
  <user-info id="userInfo" name="변승환 상무"></user-info>
</global-header>
<global-nav-bar></global-nav-bar>
<global-menu-tree></global-menu-tree>
<page-container title="실적명세서 조회"
                search="show" add="show" delete="show" excel="hide" save="show" print="disabled">
  <div style="height: 200vh">content</div>
  <script type="module">
    const userInfo = document.getElementById('userInfo');
    const navBar = document.querySelector('global-nav-bar');
    const menuTree = document.querySelector('global-menu-tree');
    const page = document.querySelector('page-container');

    const rootMenus = [
      { id: 'menu-01', name: '실적보고', icon: 'public/images/icon-menu-01.svg', selected: true },
      { id: 'menu-02', name: '프로젝트 관리', icon: 'public/images/icon-menu-02.svg' },
      { id: 'menu-03', name: '자원관리', icon: 'public/images/icon-menu-03.svg' },
      { id: 'menu-04', name: '시스템 관리', icon: 'public/images/icon-menu-04.svg' },
    ];
    const subMenus = [
      {
        id: 'menu-1-1',
        name: '기초정보',
        url: '#',
        open: true,
        children: [
          { id: 'menu-1-1-1', name: '프로젝트 정보', url: '#' },
          { id: 'menu-1-1-2', name: '해외 프로젝트', url: '#' },
          { id: 'menu-1-1-3', name: '분할 프로젝트', url: '#' },
        ],
      },
      {
        id: 'menu-1-2',
        name: '실적명세서',
        url: '#',
        open: true,
        children: [
          { id: 'menu-1-2-1', name: '실적명세서 작성', url: '#' },
          { id: 'menu-1-2-2', name: '실적명세서 조회', url: '#', selected: true },
        ],
      },
      {
        id: 'menu-1-3',
        name: '월별진행표',
        url: '#',
        open: false,
        children: [
          { id: 'menu-1-3-1', name: '월별진행표 작성', url: '#' },
          { id: 'menu-1-3-2', name: '월별진행표 조회', url: '#' },
          { id: 'menu-1-3-3', name: '월별진행표 취합', url: '#' },
        ],
      },
    ];

    navBar.setMenus(rootMenus);
    navBar.selectMenu(rootMenus[0]?.id || '');

    menuTree.title = rootMenus[0]?.name || '';
    menuTree.menus = subMenus;

    userInfo.addEventListener('logout', () => {
      console.log('logout button clicked');
    });

    navBar.addEventListener('menu-select', (e) => {
      console.log('menu selected:', e.detail);
      // 메뉴 트리 설정
      const {name} = e.detail;
      menuTree.title = name;
      menuTree.menus = [...subMenus];
    });
    navBar.addEventListener('menu-search',() => {
      console.log('menu search button clicked');
      menuTree.setSearchFocus();
    });

    page.addEventListener('search', () => {
      console.log('search button clicked.');
    });
    page.addEventListener('add', () => {
      console.log('add button clicked.');
    });
    page.addEventListener('delete', ()=> {
      console.log('delete button clicked.');
    });
    page.addEventListener('excel', () => {
      console.log('excel button clicked.');
    });
    page.addEventListener('save', () => {
      console.log('save button clicked.');
    });
    page.addEventListener('print', () => {
      console.log('print button clicked.');
    });

  </script>
</page-container>
<script type="module">
</script>
</body>
</html>
